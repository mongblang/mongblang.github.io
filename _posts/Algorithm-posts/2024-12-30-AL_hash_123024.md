---
title: "[알고리즘] 해시 - Python"
date: 2024-12-30  
categories: [코딩테스트 연습, 알고리즘 공부]
tags: [Python, Algorithm]
layout: post
author: mongblang
---

## **해시**
- 해시 함수를 사용해 변환한 값을 인덱스로 삼아 키-값을 저쟁해 빠른 데이터 탐색을 제공하는 자료구조로, 키-값 쌍으로 구성됨
    - **키(key)**: 원하는 값을 검색하기 위해 활용하는 정보 = 인덱스
    - **값(value)**: 최종으로 얻고자 하는 정보
- 단방향으로 동작하므로 키->값은 가능하지만 값->키는 불가 
- 평균 O(1)의 시간복잡도를 가짐

&nbsp;  

---

## **1. 해시 테이블**
키-값이 저장되어 있는 테이블
- 버킷/슬롯: 해시테이블의 각 데이터, 즉 실제 값이 저장되는 장소를 지칭

![hash1](/assets/img/codingtest-post-img/AL_hash-1.png)

&nbsp;  

---

## **2. 해시 함수**
- 해시 함수를 구현할 때 중요한 것은 해시 함수가 변환한 값(=인덱스)는 해시 테이블의 크기를 초과하면 안되며, 변환한 값의 충돌은 **최대한 적게** 발생해야 한다. 
    - 충돌: 서로 다른 두 키에 대해 해싱 함수를 적용한 결과가 동일 한 것으로, 같은 위치에 데이터를 저장하는 문제
    ![hash2](/assets/img/codingtest-post-img/AL_hash-2.png)
- 자주 사용하는 해시 함수: 나눗셈법, 곱셈법, 문자열 해싱


### **2-1. 나눗셈법 (Division Method)**
- 키를 소수로 나눈 나머지를 인덱스로 활용하는 방법으로, 충돌 방지를 위해 테이블의 크기를 소수이면서 2의 제곱수와 먼 값을 사용해야 한다. 
> `h(x) = x % m` (주소 = 입력값%테이블의 크기)  
x: 키
m: 최대 버킷의 개수
- 단점: 상황에 따라 아주 큰 소수가 필요하지만 큰 소수를 구하는 효율적인 방법이 없음

![hash3](/assets/img/codingtest-post-img/AL_hash-3.png)


&nbsp;  

### **2-2. 곱셈법 (Multiplication Method)** 
- 소수를 활용하지 않고 숫자로 된 키의 값 K와 0~1사이의 실수 A(황금비), 최대 버킷의 수를 사용해 계산하는 방법
> `h(x) = (((x * A) % 1) * m)`
- 키의 분산이 더 균등하고 m의 값이 2의 제곱수여도 잘 작동
![hash4](/assets/img/codingtest-post-img/AL_hash-4.png)


&nbsp;  

### **2-3. 문자열 해싱** 
- 키의 자료형이 문자열일 때 사용하는 해시 함수로, 문자를 숫자로 변환한 후 숫자들을 다항식의 값으로 변환해 해싱하는 방법
> `hash(s) = (s[0] % m + s[1] * p % m + s[2] * p^(2 % m) ... s[n-1] * p^((n-1) % m) % m)`  
이때 p는 주로 메르센 소수를 사용함

&nbsp;  

---

## **3. 충돌 처리** 

### **3-1. 체이닝**
- 충돌 발생시 해당 버킷에 링크드리스트(linked list)로 같은 해시값을 가지는 데이터를 연결해 해결하는 방법 
    - 링크드리스트: 데이터 요소들을 연결하여 구성한 선형 데이터 구조
- 단점: 공간활용성 및 검색 성능 저하 

![hash5](/assets/img/codingtest-post-img/AL_hash-5.png)

&nbsp;  

### **3-2. 개방 주소법 (Open Addressing)**
- 충돌 발생시 다른 빈 버킷을 찾아 충돌값을 삽입하는 방법으로 체이닝보다 메모리 효율적이며 빈 버킷을 찾을 때 선형 탐사 방식과 이중 해시 방식을 활용
    - **선형 탐사 방식**: 빈 버킷을 찾을 때 까지 일정한 간격으로 이동하며 탐색하는 방식으로, 간격은 주로 1로 하지만 클러스터가 형성되는걸 방지하기 위해 제곱수로 설정하기도 함
    > `h(k,i) = (h(k)+i) % m`
    - **이중 해싱 방식**: 해시 함수를 2개~N개 사용하는 방식으로, 충돌 발생시 주어지는 키마다 간격을 해시 함수를 다르게 해서 클러스터 형성을 방지함
    > `h(k,i) = (h_1(k) + i * h_2(k)) % m`

&nbsp;  

---

## **프로그래머스 해시 연습문제 (코드 해설 포함)**

- [완주하지 못한 선수](https://mongblang.github.io/posts/PG-post3_121324/)
- [폰켓몬](https://mongblang.github.io/posts/PG_post2_121324/)
- [전화번호 목록](https://mongblang.github.io/posts/PG_post2_122324/)
- [의상](https://mongblang.github.io/posts/PG_post1_122424/)
